{% extends "base.html" %}

{% block title %}Dashboard - HERA{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-grid">
    <!-- Hero Countdown Section -->
    <div class="countdown-hero card">
        <div class="countdown-content">
            <div class="countdown-header">
                <h2 class="countdown-title">
                    <i class="fas fa-heart text-accent"></i>
                    The Big Day
                </h2>
                <p class="countdown-subtitle">September 24, 2025 • Emerald Lake, Banff</p>
            </div>
            
            <div class="countdown-display">
                <div id="countdown-main" class="countdown-main">
                    <div class="countdown-number">{{ days_remaining }}</div>
                    <div class="countdown-label">Days Remaining</div>
                </div>
                
                <div class="countdown-details">
                    <div class="countdown-item">
                        <span id="hours-remaining">0</span>
                        <span class="countdown-unit">Hours</span>
                    </div>
                    <div class="countdown-item">
                        <span id="minutes-remaining">0</span>
                        <span class="countdown-unit">Minutes</span>
                    </div>
                </div>
            </div>
            
            <div class="countdown-message">
                <div id="milestone-message" class="milestone-text">
                    Planning phase in full swing - making dreams reality!
                </div>
            </div>
        </div>
    </div>

    <!-- Status Cards Grid -->
    <div class="status-grid">
        <!-- Budget Progress Card -->
        <div class="status-card card">
            <div class="status-header">
                <div class="status-icon budget-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="status-info">
                    <h3 class="status-title">Budget Progress</h3>
                    <p class="status-value">${{ "%.2f"|format(paid_budget) }} / ${{ "%.2f"|format(total_budget) }}</p>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ budget_progress }}%"></div>
            </div>
            
            <div class="status-footer">
                <span class="status-percentage">{{ "%.1f"|format(budget_progress) }}% Complete</span>
                <span class="status-remaining">${{ "%.2f"|format(total_budget - paid_budget) }} Remaining</span>
            </div>
        </div>

        <!-- Family Approval Card -->
        <div class="status-card card">
            <div class="status-header">
                <div class="status-icon family-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="status-info">
                    <h3 class="status-title">Family Approval</h3>
                    <p class="status-value">{{ approved_family }} / {{ total_family }} Approved</p>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill family-progress" style="width: {{ family_progress }}%"></div>
            </div>
            
            <div class="status-footer">
                <span class="status-percentage">{{ "%.1f"|format(family_progress) }}% Family Buy-in</span>
                <span class="status-remaining">{{ total_family - approved_family }} Pending</span>
            </div>
        </div>

        <!-- Packing Progress Card -->
        <div class="status-card card">
            <div class="status-header">
                <div class="status-icon packing-icon">
                    <i class="fas fa-suitcase"></i>
                </div>
                <div class="status-info">
                    <h3 class="status-title">Packing Progress</h3>
                    <p class="status-value">{{ packed_items }} / {{ total_packing }} Packed</p>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill packing-progress" style="width: {{ packing_progress }}%"></div>
            </div>
            
            <div class="status-footer">
                <span class="status-percentage">{{ "%.1f"|format(packing_progress) }}% Ready</span>
                <span class="status-remaining">{{ total_packing - packed_items }} Items Left</span>
            </div>
        </div>

        <!-- Ring Status Card -->
        <div class="status-card card ring-special">
            <div class="status-header">
                <div class="status-icon ring-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="status-info">
                    <h3 class="status-title">The Ring</h3>
                    <p class="status-value">2.98ct Lab Diamond</p>
                </div>
            </div>
            
            <div class="ring-status">
                <div class="ring-status-badge delivered">
                    <i class="fas fa-check-circle"></i>
                    <span>Delivered & Ready</span>
                </div>
            </div>
            
            <div class="status-footer">
                <span class="status-details">18k Yellow Gold • GWFJ</span>
                <span class="status-insured">
                    <i class="fas fa-shield-alt"></i>
                    Insured
                </span>
            </div>
        </div>
    </div>

    <!-- Quick Actions Panel -->
    <div class="quick-actions card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-bolt"></i>
                Quick Actions
            </h3>
        </div>
        
        <div class="actions-grid">
            <a href="{{ url_for('budget') }}" class="action-item">
                <div class="action-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="action-content">
                    <span class="action-title">Review Budget</span>
                    <span class="action-subtitle">Track expenses</span>
                </div>
            </a>
            
            <a href="{{ url_for('itinerary') }}" class="action-item">
                <div class="action-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="action-content">
                    <span class="action-title">View Itinerary</span>
                    <span class="action-subtitle">5-day plan</span>
                </div>
            </a>
            
            <a href="{{ url_for('travel') }}" class="action-item">
                <div class="action-icon">
                    <i class="fas fa-plane"></i>
                </div>
                <div class="action-content">
                    <span class="action-title">Travel Details</span>
                    <span class="action-subtitle">Flights & hotel</span>
                </div>
            </a>
            
            <a href="{{ url_for('family') }}" class="action-item">
                <div class="action-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="action-content">
                    <span class="action-title">Family Status</span>
                    <span class="action-subtitle">Permissions</span>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Activity Timeline -->
    <div class="timeline-card card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-clock"></i>
                Recent Updates
            </h3>
        </div>
        
        <div class="timeline">
            <div class="timeline-item completed">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <div class="timeline-title">Ring Delivered</div>
                    <div class="timeline-subtitle">2.98ct lab diamond safely received</div>
                    <div class="timeline-time">Completed</div>
                </div>
            </div>
            
            <div class="timeline-item completed">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <div class="timeline-title">Flights Booked</div>
                    <div class="timeline-subtitle">IAD → YYC confirmed for Sept 24-29</div>
                    <div class="timeline-time">Completed</div>
                </div>
            </div>
            
            <div class="timeline-item in-progress">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <div class="timeline-title">Hotel Reservation</div>
                    <div class="timeline-subtitle">Canalta Lodge - King Room w/ Balcony</div>
                    <div class="timeline-time">Confirmed</div>
                </div>
            </div>
            
            <div class="timeline-item pending">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <div class="timeline-title">Final Preparations</div>
                    <div class="timeline-subtitle">Packing and last-minute details</div>
                    <div class="timeline-time">Upcoming</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}